# Текст презентации

## Слайд 1

Я студент 421 группы факультета КНиИТ Давиденко Алексей Алексеевич. Тема моей практической работы "Выбор аппаратного комплекса для управления адресными светодиодными лентами WS2812b на базе одноплатного компьютера Raspberry Pi".

## Слайд 2

Целью преддипломной практической работы является разработка и тестирование аппаратно-технического комплекса, позволяющего управлять адресными светодиодными лентами с помощью звука.

Для достижения цели были поставлены следующие задачи:

1. Обзор и анализ характеристик и особенностей работы светодиодов, подходящих для реализации поставленной задачи;
2. Изучение способов работы со звуковыми потоками;
3. Обзор и анализ характеристик платформ, подходящих для реализации поставленной задачи;
4. Изучение работы с одноплатными компьютерами Raspberry Pi;
5. Разработка решения, позволяющего управлять адресными светодиодными лентами с помощью звука.

## Слайд 3

Существует большое количество разновидностей адресных светодиодов. Ввиду своей популярности и доступности был выбран светодиод WS2812B.

Данный светодиод представляет из себя адресный светодиод, состоящий из контроллера и RGB-чипа, интегрированных в базу светодиода SMD 5050.

## Слайд 4

Основные эталонные характеристики этого светодиода представлены на слайде.

## Слайд 5

Для передачи данных в лентах светодиодов WS2812B применяется линейное кодирование, в котором информация представляется в цифровом виде и в канал связи формируется сигнал в соответствие с кодом. При этом логическому нулю соответствует нижний уровень сигнала, а логической единице - верхний.

Каждый светодиод кодируется пакетом в 24 бита, где первые 8 бит кодируют зелёную составляющую цвета светодиода, вторые 8 бит красную и последние - синюю. При этом, контроллер светодиода, получив на вход поток данных, забирает себе первые 24 бита из потока и передаёт оставшиеся биты на вход следующего светодиода.

Временная диаграмма передачи данных в ленте светодиодов представлена на слайде.

## Слайд 6

Для обработки звука в Linux системах применяются 2 вида звуковых подсистем: ALSA и OSS.

Ввиду того, что OSS становится всё менее и менее популярным, а также ввиду преимуществ ALSA, была выбрана последняя звуковая подсистема.

## Слайд 7

Наиболее весомыми преимуществами ALSA над OSS являются:

1. поддержка всех типов интерфейсов;
2. полностью модульные звуковые драйвера;
3. Полнодуплексная работа.

## Слайд 8

Для оцифровки аналоговых звуковых сигналов, в ALSA применяется импульсно кодовая модуляция, или PCM.

Процесс импульсно-кодовой модуляции заключается в фиксации амплитуды сигнала через равные промежутки времени, или дискретизации по времени, регистрации полученных значений амплитуды в виде округлённых цифровых значений, или квантования, и кодировании полученных цифровых значений.

## Слайд 9

Для записи со звуковой системы ALSA используется утилита arecord, а для воспроизведения - aplay. При работе с этими утилитами необходимо указывать параметры, представленные на слайде.

## Слайд 10

Для реализации поставленной задачи, была выбрана платформа Raspberry Pi. Ввиду своей распространённости и доступности, была выбрана модель Raspberry Pi 3 model B.

## Слайд 11

Технические характеристики одноплатного компьютера представлены на слайде.

## Слайд 12

Для управления светодиодной лентой, необходима генерация ШИМ-сигнала, которая подаётся на вход светодиодной ленты. 

Использование светодиодов WS2812b накладывает свои требования к генератору ШИМ-сигнала.

Так как для задания цвета светодиода необходимо передать 24 бита информации, необходимо знать длительности импульсов, которые контролер светодиода распознает как 1 или 0. Длительность периода составляет 1250 наносекунд, при этом логическому нулю соответствует длительность высокого уровня в 350 наносекунд, а логической единицы - 900 наносекунд. Интервал между пакетами в 24 бита составляет 50 микросекунд.

## Слайд 13

Для генерации ШИМ сигнала можно использовать контакты GPIO, расположенные на плате Raspberry Pi. При этом для аппаратной генерации ШИМ можно использовать только контакты GPIO12, GPIO13, GPIO18 и GPIO19.

На слайде представлена полная карта контактов GPIO на плате Raspberry PI.

## Слайд 14

Для реализации программной составляющей комплекса, использовался Node.JS, среда выполнения javascript.

Для управления адресной светодиодной лентой был использован пакет rpi-ws281x-native, а для запуска дочерних процессов - child_process.

С помощью пакета rpi-ws281x-native можно работать со светодиодами как с массивом целых чисел, где индекс элемента массива будет соответствовать номеру светодиода в ленте, а записанное в элементе число - цвет светодиода.

Пакет child_process использовался для запуска процессов записи и воспроизведения звуковых потоков с помощью утилит arecord и aplay соответственно.

## Слайд 15

Собранный программно-аппаратный комплекс представлен на слайде

## Слайд 16

Пример работы комплекса представлен на слайде.

Также я хочу показать видео работы комплекса. *переключение на видео*

## Слайд 17

В рамках практической работы были

1. Изучены и проанализированы характеристики и особенности работы светодиодов, подходящих для реализации поставленной цели;
2. Изучены способы работы со звуковыми потоками;
3. Изучены и проанализированы характеристики платформ, подходящих для реализации поставленной задачи;
4. Изучены особенности работы с одноплатными компьютерами Raspberry Pi;
5. Разработано решение, позволяющее управлять адресными светодиодными лентами с помощью звука.

